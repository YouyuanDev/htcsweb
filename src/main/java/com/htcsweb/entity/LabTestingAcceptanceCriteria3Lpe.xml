<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.htcsweb.dao.LabTestingAcceptanceCriteria3LpeDao">

    <insert id="addLabTestCriteria3Lpe" parameterType="com.htcsweb.entity.LabTestingAcceptanceCriteria3Lpe">
    INSERT INTO lab_testing_acceptance_criteria_3lpe(lab_testing_acceptance_criteria_no,resistance_to_cd_20_28d_max,resistance_to_cd_20_28d_min,resistance_to_cd_max_28d_max,resistance_to_cd_max_28d_min,resistance_to_cd_65_24h_max,resistance_to_cd_65_24h_min,impact_resistance_23_max,impact_resistance_23_min,impact_resistance_m40_max,impact_resistance_m40_min,indentation_hardness_23_max,indentation_hardness_23_min,indentation_hardness_70_max,indentation_hardness_70_min,elongation_at_break_max,elongation_at_break_min,coating_resistivity_max,coating_resistivity_min,thermal_degradation_max,thermal_degradation_min,last_update_time,dsc_delta_tg_max,dsc_delta_tg_min,dsc_c_max,dsc_c_min) VALUES (#{lab_testing_acceptance_criteria_no},#{resistance_to_cd_20_28d_max},#{resistance_to_cd_20_28d_min},#{resistance_to_cd_max_28d_max},#{resistance_to_cd_max_28d_min},#{resistance_to_cd_65_24h_max},#{resistance_to_cd_65_24h_min},#{impact_resistance_23_max},#{impact_resistance_23_min},#{impact_resistance_m40_max},#{impact_resistance_m40_min},#{indentation_hardness_23_max},#{indentation_hardness_23_min},#{indentation_hardness_70_max},#{indentation_hardness_70_min},#{elongation_at_break_max},#{elongation_at_break_min},#{coating_resistivity_max},#{coating_resistivity_min},#{thermal_degradation_max},#{thermal_degradation_min},#{last_update_time},#{dsc_delta_tg_max},#{dsc_delta_tg_min},#{dsc_c_max},#{dsc_c_min})
    </insert>
    <delete id="delLabTestCriteria3Lpe">
        delete from lab_testing_acceptance_criteria_3lpe WHERE
        <foreach collection="array" item="item" open="id in (" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <update id="updateLabTestCriteria3Lpe" parameterType="com.htcsweb.entity.LabTestingAcceptanceCriteria3Lpe">
     UPDATE lab_testing_acceptance_criteria_3lpe set lab_testing_acceptance_criteria_no=#{lab_testing_acceptance_criteria_no},resistance_to_cd_20_28d_max=#{resistance_to_cd_20_28d_max},resistance_to_cd_20_28d_min=#{resistance_to_cd_20_28d_min},resistance_to_cd_max_28d_max=#{resistance_to_cd_max_28d_max},resistance_to_cd_max_28d_min=#{resistance_to_cd_max_28d_min},resistance_to_cd_65_24h_max=#{resistance_to_cd_65_24h_max},resistance_to_cd_65_24h_min=#{resistance_to_cd_65_24h_min},impact_resistance_23_max=#{impact_resistance_23_max},impact_resistance_23_min=#{impact_resistance_23_min},impact_resistance_m40_max=#{impact_resistance_m40_max},impact_resistance_m40_min=#{impact_resistance_m40_min},indentation_hardness_23_max=#{indentation_hardness_23_max},indentation_hardness_23_min=#{indentation_hardness_23_min},indentation_hardness_70_max=#{indentation_hardness_70_max},indentation_hardness_70_min=#{indentation_hardness_70_min},elongation_at_break_max=#{elongation_at_break_max},elongation_at_break_min=#{elongation_at_break_min},coating_resistivity_max=#{coating_resistivity_max},coating_resistivity_min=#{coating_resistivity_min},thermal_degradation_max=#{thermal_degradation_max},thermal_degradation_min=#{thermal_degradation_min},last_update_time=#{last_update_time},dsc_delta_tg_max=#{dsc_delta_tg_max},dsc_delta_tg_min=#{dsc_delta_tg_min},dsc_c_max=#{dsc_c_max},dsc_c_min=#{dsc_c_min} where id=#{id}
    </update>

    <select id="getCountNewAllByLike" resultType="int">
        select count(*) from lab_testing_acceptance_criteria_3lpe
        <where>
            <if test="lab_testing_acceptance_criteria_no!=null and lab_testing_acceptance_criteria_no!=''">
                AND lab_testing_acceptance_criteria_no LIKE CONCAT('%',#{lab_testing_acceptance_criteria_no},'%')
            </if>
        </where>
    </select>

    <select id="getNewAllByLike" resultType="map">
        Select * from lab_testing_acceptance_criteria_3lpe
        <where>
            <if test="lab_testing_acceptance_criteria_no!=null and lab_testing_acceptance_criteria_no!=''">
                AND lab_testing_acceptance_criteria_no LIKE CONCAT('%',#{lab_testing_acceptance_criteria_no},'%')
            </if>
        </where>
        ORDER BY id DESC
        limit #{skip},#{take}
    </select>

    <select id="getAllLabTestingAcceptanceCriteria3Lpe" resultType="com.htcsweb.entity.LabTestingAcceptanceCriteria3Lpe">
        SELECT  * from lab_testing_acceptance_criteria_3lpe
        ORDER BY id DESC
    </select>
    <select id="getLabTestCriteria3LpeByContractNo" resultType="com.htcsweb.entity.LabTestingAcceptanceCriteria3Lpe">
        select cri.* from lab_testing_acceptance_criteria_3lpe cri
        inner join project_info pro on pro.lab_testing_acceptance_criteria_3lpe_no=cri.lab_testing_acceptance_criteria_no
        inner join contract_info c on c.project_no=pro.project_no
        <where>
            <if test="contract_no!=null and contract_no!=''">
                AND c.contract_no =#{contract_no}
            </if>
        </where>

    </select>


    <select id="getLabTestCriteria3LpeByPipeNo" resultType="com.htcsweb.entity.LabTestingAcceptanceCriteria3Lpe">
        select cri.* from lab_testing_acceptance_criteria_3lpe cri
        inner join project_info pro on pro.lab_testing_acceptance_criteria_3lpe_no=cri.lab_testing_acceptance_criteria_no
        inner join contract_info c on c.project_no=pro.project_no
        inner join pipe_basic_info p on p.contract_no=c.contract_no
        <where>
            <if test="pipe_no!=null and pipe_no!=''">
                AND p.pipe_no =#{pipe_no}
            </if>
        </where>
    </select>

</mapper>