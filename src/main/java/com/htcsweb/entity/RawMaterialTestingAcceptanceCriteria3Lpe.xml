<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.htcsweb.dao.RawMaterialTestingAcceptanceCriteria3LpeDao">

    <insert id="addRawMaterialTestingAcceptanceCriteria3Lpe" parameterType="com.htcsweb.entity.RawMaterialTestingAcceptanceCriteria3Lpe">
        INSERT INTO raw_material_testing_acceptance_criteria_3lpe (raw_material_testing_acceptance_criteria_no,epoxy_cure_time_max,epoxy_cure_time_min,epoxy_gel_time_max,epoxy_gel_time_min,epoxy_moisture_content_max,epoxy_moisture_content_min,epoxy_particle_size_150um_max,epoxy_particle_size_150um_min,epoxy_particle_size_250um_max,epoxy_particle_size_250um_min,adhesion_flow_rate_max,adhesion_flow_rate_min,polyethylene_flow_rate_max,polyethylene_flow_rate_min,last_update_time,epoxy_dsc_delta_h_max,epoxy_dsc_delta_h_min,epoxy_dsc_tg2_max,epoxy_dsc_tg2_min)
        VALUES (#{raw_material_testing_acceptance_criteria_no},#{epoxy_cure_time_max},#{epoxy_cure_time_min},#{epoxy_gel_time_max},#{epoxy_gel_time_min},#{epoxy_moisture_content_max},#{epoxy_moisture_content_min},#{epoxy_particle_size_150um_max},#{epoxy_particle_size_150um_min},#{epoxy_particle_size_250um_max},#{epoxy_particle_size_250um_min},#{adhesion_flow_rate_max},#{adhesion_flow_rate_min},#{polyethylene_flow_rate_max},#{polyethylene_flow_rate_min},#{last_update_time},#{epoxy_dsc_delta_h_max},#{epoxy_dsc_delta_h_min},#{epoxy_dsc_tg2_max},#{epoxy_dsc_tg2_min})
    </insert>
    <delete id="delRawMaterialTestingAcceptanceCriteria3Lpe">
        delete from raw_material_testing_acceptance_criteria_3lpe WHERE
        <foreach collection="array" item="item" open="id in (" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <update id="updateRawMaterialTestingAcceptanceCriteria3Lpe" parameterType="com.htcsweb.entity.RawMaterialTestingAcceptanceCriteria3Lpe">
        UPDATE raw_material_testing_acceptance_criteria_3lpe set raw_material_testing_acceptance_criteria_no=#{raw_material_testing_acceptance_criteria_no},epoxy_cure_time_max=#{epoxy_cure_time_max},epoxy_cure_time_min=#{epoxy_cure_time_min},epoxy_gel_time_max=#{epoxy_gel_time_max},epoxy_gel_time_min=#{epoxy_gel_time_min},epoxy_moisture_content_max=#{epoxy_moisture_content_max},epoxy_moisture_content_min=#{epoxy_moisture_content_min},epoxy_particle_size_150um_max=#{epoxy_particle_size_150um_max},epoxy_particle_size_150um_min=#{epoxy_particle_size_150um_min},epoxy_particle_size_250um_max=#{epoxy_particle_size_250um_max},epoxy_particle_size_250um_min=#{epoxy_particle_size_250um_min},adhesion_flow_rate_max=#{adhesion_flow_rate_max},adhesion_flow_rate_min=#{adhesion_flow_rate_min},polyethylene_flow_rate_max=#{polyethylene_flow_rate_max},polyethylene_flow_rate_min=#{polyethylene_flow_rate_min},last_update_time=#{last_update_time},epoxy_dsc_delta_h_max=#{epoxy_dsc_delta_h_max},epoxy_dsc_delta_h_min=#{epoxy_dsc_delta_h_min},epoxy_dsc_tg2_max=#{epoxy_dsc_tg2_max},epoxy_dsc_tg2_min=#{epoxy_dsc_tg2_min} where id=#{id}
    </update>

    <select id="getCountAllByLike" resultType="int">
        select count(*) from raw_material_testing_acceptance_criteria_3lpe
        <where>
            <if test="raw_material_testing_acceptance_criteria_no!=null and raw_material_testing_acceptance_criteria_no!=''">
                AND raw_material_testing_acceptance_criteria_no LIKE CONCAT('%',#{raw_material_testing_acceptance_criteria_no},'%')
            </if>
        </where>
    </select>

    <select id="getAllByLike" resultType="map">
        Select * from raw_material_testing_acceptance_criteria_3lpe
        <where>
            <if test="raw_material_testing_acceptance_criteria_no!=null and raw_material_testing_acceptance_criteria_no!=''">
                AND raw_material_testing_acceptance_criteria_no LIKE CONCAT('%',#{raw_material_testing_acceptance_criteria_no},'%')
            </if>
        </where>
        ORDER BY id DESC
        limit #{skip},#{take}
    </select>

    <select id="getAllRawMaterialTestingAcceptanceCriteria3Lpe"  resultType="com.htcsweb.entity.RawMaterialTestingAcceptanceCriteria3Lpe">
        SELECT  * from raw_material_testing_acceptance_criteria_3lpe
        ORDER BY id DESC
    </select>
    <select id="getRawMaterialTestingAcceptanceCriteria3LpeByProjectNo" resultType="com.htcsweb.entity.RawMaterialTestingAcceptanceCriteria3Lpe">
       select o.* from project_info p  inner JOIN raw_material_testing_acceptance_criteria_3lpe o on p.raw_material_acceptance_criteria_3lpe_no=o.raw_material_testing_acceptance_criteria_no
        <where>
            <if test="project_no!=null and project_no!=''">
                AND p.project_no=#{project_no}
            </if>
        </where>
    </select>

    <select id="getRawMaterialStandard3LpeByPipeNo" resultType="com.htcsweb.entity.RawMaterialTestingAcceptanceCriteria3Lpe">
        select o.* from project_info pro
        inner JOIN raw_material_testing_acceptance_criteria_3lpe o on
        pro.raw_material_acceptance_criteria_3lpe_no=o.raw_material_testing_acceptance_criteria_no
        inner join contract_info c on c.project_no=pro.project_no
        inner join pipe_basic_info p on p.contract_no=c.contract_no
        <where>
            <if test="pipe_no!=null and pipe_no!=''">
                AND p.pipe_no=#{pipe_no}
            </if>
        </where>
    </select>



</mapper>