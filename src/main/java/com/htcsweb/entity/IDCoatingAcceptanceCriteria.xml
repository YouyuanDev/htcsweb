<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.htcsweb.dao.IDCoatingAcceptanceCriteriaDao">

    <insert id="addIdCoatingCriterProcess" parameterType="com.htcsweb.entity.IDCoatingAcceptanceCriteria">
        INSERT INTO id_coating_acceptance_criteria(coating_acceptance_criteria_no,temp_above_dew_point_max,
        temp_above_dew_point_min,blast_finish_sa25_max,blast_finish_sa25_min,relative_humidity_max,relative_humidity_min,
        id_profile_max,id_profile_min,dry_film_thickness_max,dry_film_thickness_min,cutback_max,cutback_min,
        residual_magnetism_max,residual_magnetism_min,last_update_time,wet_film_thickness_max,wet_film_thickness_min,
        salt_contamination_before_blast_max,salt_contamination_before_blast_min,salt_contamination_after_blasting_max,
        salt_contamination_after_blasting_min,surface_dust_rating_max,surface_dust_rating_min,holiday_max,holiday_min,
        roughness_max,roughness_min,pipe_temp_max,pipe_temp_min,repair_max,repair_min,holiday_tester_voltage_max,
        holiday_tester_voltage_min,strip_temp_max,strip_temp_min,stencil_content)
        VALUES (#{coating_acceptance_criteria_no},#{temp_above_dew_point_max},#{temp_above_dew_point_min},
        #{blast_finish_sa25_max},#{blast_finish_sa25_min},#{relative_humidity_max},#{relative_humidity_min},
        #{id_profile_max},#{id_profile_min},#{dry_film_thickness_max},#{dry_film_thickness_min},#{cutback_max},
        #{cutback_min},#{residual_magnetism_max},#{residual_magnetism_min},#{last_update_time},#{wet_film_thickness_max},
        #{wet_film_thickness_min},#{salt_contamination_before_blast_max},#{salt_contamination_before_blast_min},
        #{salt_contamination_after_blasting_max},#{salt_contamination_after_blasting_min},#{surface_dust_rating_max},
        #{surface_dust_rating_min},#{holiday_max},#{holiday_min},#{roughness_max},#{roughness_min},
        #{pipe_temp_max},#{pipe_temp_min},#{repair_max},#{repair_min},#{holiday_tester_voltage_max},
        #{holiday_tester_voltage_min},#{strip_temp_max},#{strip_temp_min},#{stencil_content}
        )
    </insert>
    <delete id="delIdCoatingCriterProcess">
        delete from id_coating_acceptance_criteria WHERE
        <foreach collection="array" item="item" open="id in (" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <update id="updateIdCoatingCriterProcess" parameterType="com.htcsweb.entity.IDCoatingAcceptanceCriteria">
        UPDATE id_coating_acceptance_criteria set coating_acceptance_criteria_no=#{coating_acceptance_criteria_no},
        temp_above_dew_point_max=#{temp_above_dew_point_max},temp_above_dew_point_min=#{temp_above_dew_point_min},
        blast_finish_sa25_max=#{blast_finish_sa25_max},blast_finish_sa25_min=#{blast_finish_sa25_min},
        relative_humidity_max=#{relative_humidity_max},relative_humidity_min=#{relative_humidity_min},
        id_profile_max=#{id_profile_max},id_profile_min=#{id_profile_min},dry_film_thickness_max=#{dry_film_thickness_max},
        dry_film_thickness_min=#{dry_film_thickness_min},cutback_max=#{cutback_max},cutback_min=#{cutback_min},
        residual_magnetism_max=#{residual_magnetism_max},residual_magnetism_min=#{residual_magnetism_min},
        last_update_time=#{last_update_time}, wet_film_thickness_max=#{wet_film_thickness_max},
        wet_film_thickness_min=#{wet_film_thickness_min},salt_contamination_before_blast_max=#{salt_contamination_before_blast_max},
        salt_contamination_before_blast_min=#{salt_contamination_before_blast_min},
        salt_contamination_after_blasting_max=#{salt_contamination_after_blasting_max},
        salt_contamination_after_blasting_min=#{salt_contamination_after_blasting_min},
        surface_dust_rating_max=#{surface_dust_rating_max},surface_dust_rating_min=#{surface_dust_rating_min},
        holiday_max=#{holiday_max},holiday_min=#{holiday_min},roughness_max=#{roughness_max},roughness_min=#{roughness_min},
        pipe_temp_max=#{pipe_temp_max},pipe_temp_min=#{pipe_temp_min},repair_max=#{repair_max},
        repair_min=#{repair_min},holiday_tester_voltage_max=#{holiday_tester_voltage_max},
        holiday_tester_voltage_min=#{holiday_tester_voltage_min},
        strip_temp_max=#{strip_temp_max},strip_temp_min=#{strip_temp_min},stencil_content=#{stencil_content}
         where id=#{id}
    </update>

    <select id="getCount" resultType="int">
        select count(*) from id_coating_acceptance_criteria
        <where>
            <if test="coating_acceptance_criteria_no!=null and coating_acceptance_criteria_no!=''">
                AND coating_acceptance_criteria_no LIKE CONCAT('%',#{coating_acceptance_criteria_no},'%')
            </if>
        </where>
    </select>

    <select id="getAllByLike" resultType="map">
        Select * from id_coating_acceptance_criteria
        <where>
            <if test="coating_acceptance_criteria_no!=null and coating_acceptance_criteria_no!=''">
                AND coating_acceptance_criteria_no LIKE CONCAT('%',#{coating_acceptance_criteria_no},'%')
            </if>
        </where>
        ORDER BY id DESC
        limit #{skip},#{take}
    </select>

    <select id="getAllIDAcceptanceCriteria" resultType="com.htcsweb.entity.IDCoatingAcceptanceCriteria">
        SELECT  * from id_coating_acceptance_criteria
        ORDER BY id DESC
    </select>
    <select id="getIDAcceptanceCriteriaByContractNo" resultType="com.htcsweb.entity.IDCoatingAcceptanceCriteria">
        select o.* from contract_info c inner JOIN project_info p on c.project_no=p.project_no inner JOIN id_coating_acceptance_criteria o on p.id_coating_acceptance_criteria_no=o.coating_acceptance_criteria_no WHERE c.contract_no=#{contract_no}
    </select>
</mapper>