<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.htcsweb.dao.ODCoatingAcceptanceCriteriaDao">

    <insert id="addOdCoatingCriterProcess" parameterType="com.htcsweb.entity.ODCoatingAcceptanceCriteria">
          INSERT INTO od_coating_acceptance_criteria(coating_acceptance_criteria_no,salt_contamination_before_blast_max,salt_contamination_before_blast_min,preheat_temp_max,preheat_temp_min,relative_humidity_max,relative_humidity_min,temp_above_dew_point_max,temp_above_dew_point_min,blast_finish_sa25_max,blast_finish_sa25_min,surface_dust_rating_max,surface_dust_rating_min,od_profile_max,od_profile_min,pipe_temp_after_blast_max,pipe_temp_after_blast_min,salt_contamination_after_blasting_max,salt_contamination_after_blasting_min,application_temp_max,application_temp_min,base_2fbe_coat_thickness_max,base_2fbe_coat_thickness_min,top_2fbe_coat_thickness_max,top_2fbe_coat_thickness_min,total_2fbe_coat_thickness_max,total_2fbe_coat_thickness_min,top_3lpe_coat_thickness_max,top_3lpe_coat_thickness_min,middle_3lpe_coat_thickness_max,middle_3lpe_coat_thickness_min,base_3lpe_coat_thickness_max,base_3lpe_coat_thickness_min,total_3lpe_coat_thickness_max,total_3lpe_coat_thickness_min,repair_max,repair_min,holiday_tester_voltage_max,holiday_tester_voltage_min,cutback_max,cutback_min,last_update_time,epoxy_cutback_max,epoxy_cutback_min,magnetism_max,magnetism_min,coating_bevel_angle_max,coating_bevel_angle_min) VALUES (#{coating_acceptance_criteria_no},#{salt_contamination_before_blast_max},#{salt_contamination_before_blast_min},#{preheat_temp_max},#{preheat_temp_min},#{relative_humidity_max},#{relative_humidity_min},#{temp_above_dew_point_max},#{temp_above_dew_point_min},#{blast_finish_sa25_max},#{blast_finish_sa25_min},#{surface_dust_rating_max},#{surface_dust_rating_min},#{od_profile_max},#{od_profile_min},#{pipe_temp_after_blast_max},#{pipe_temp_after_blast_min},#{salt_contamination_after_blasting_max},#{salt_contamination_after_blasting_min},#{application_temp_max},#{application_temp_min},#{base_2fbe_coat_thickness_max},#{base_2fbe_coat_thickness_min},#{top_2fbe_coat_thickness_max},#{top_2fbe_coat_thickness_min},#{total_2fbe_coat_thickness_max},#{total_2fbe_coat_thickness_min},#{top_3lpe_coat_thickness_max},#{top_3lpe_coat_thickness_min},#{middle_3lpe_coat_thickness_max},#{middle_3lpe_coat_thickness_min},#{base_3lpe_coat_thickness_max},#{base_3lpe_coat_thickness_min},#{total_3lpe_coat_thickness_max},#{total_3lpe_coat_thickness_min},#{repair_max},#{repair_min},#{holiday_tester_voltage_max},#{holiday_tester_voltage_min},#{cutback_max},#{cutback_min},#{last_update_time},#{epoxy_cutback_max},#{epoxy_cutback_min},#{magnetism_max},#{magnetism_min},#{coating_bevel_angle_max},#{coating_bevel_angle_min})
    </insert>
    <delete id="delOdCoatingCriterProcess">
        delete from od_coating_acceptance_criteria WHERE
        <foreach collection="array" item="item" open="id in (" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <update id="updateOdCoatingCriterProcess" parameterType="com.htcsweb.entity.ODCoatingAcceptanceCriteria">
       UPDATE od_coating_acceptance_criteria set coating_acceptance_criteria_no=#{coating_acceptance_criteria_no},salt_contamination_before_blast_max=#{salt_contamination_before_blast_max},salt_contamination_before_blast_min=#{salt_contamination_before_blast_min},preheat_temp_max=#{preheat_temp_max},preheat_temp_min=#{preheat_temp_min},relative_humidity_max=#{relative_humidity_max},relative_humidity_min=#{relative_humidity_min},temp_above_dew_point_max=#{temp_above_dew_point_max},temp_above_dew_point_min=#{temp_above_dew_point_min},blast_finish_sa25_max=#{blast_finish_sa25_max},blast_finish_sa25_min=#{blast_finish_sa25_min},surface_dust_rating_max=#{surface_dust_rating_max},surface_dust_rating_min=#{surface_dust_rating_min},od_profile_max=#{od_profile_max},od_profile_min=#{od_profile_min},pipe_temp_after_blast_max=#{pipe_temp_after_blast_max},pipe_temp_after_blast_min=#{pipe_temp_after_blast_min},salt_contamination_after_blasting_max=#{salt_contamination_after_blasting_max},salt_contamination_after_blasting_min=#{salt_contamination_after_blasting_min},application_temp_max=#{application_temp_max},application_temp_min=#{application_temp_min},base_2fbe_coat_thickness_max=#{base_2fbe_coat_thickness_max},base_2fbe_coat_thickness_min=#{base_2fbe_coat_thickness_min},top_2fbe_coat_thickness_max=#{top_2fbe_coat_thickness_max},top_2fbe_coat_thickness_min=#{top_2fbe_coat_thickness_min},total_2fbe_coat_thickness_max=#{total_2fbe_coat_thickness_max},total_2fbe_coat_thickness_min=#{total_2fbe_coat_thickness_min},top_3lpe_coat_thickness_max=#{top_3lpe_coat_thickness_max},top_3lpe_coat_thickness_min=#{top_3lpe_coat_thickness_min},middle_3lpe_coat_thickness_max=#{middle_3lpe_coat_thickness_max},middle_3lpe_coat_thickness_min=#{middle_3lpe_coat_thickness_min},base_3lpe_coat_thickness_max=#{base_3lpe_coat_thickness_max},base_3lpe_coat_thickness_min=#{base_3lpe_coat_thickness_min},total_3lpe_coat_thickness_max=#{total_3lpe_coat_thickness_max},total_3lpe_coat_thickness_min=#{total_3lpe_coat_thickness_min},repair_max=#{repair_max},repair_min=#{repair_min},holiday_tester_voltage_max=#{holiday_tester_voltage_max},holiday_tester_voltage_min=#{holiday_tester_voltage_min},cutback_max=#{cutback_max},cutback_min=#{cutback_min},last_update_time=#{last_update_time},epoxy_cutback_max=#{epoxy_cutback_max},epoxy_cutback_min=#{epoxy_cutback_min},magnetism_max=#{magnetism_max},magnetism_min=#{magnetism_min},coating_bevel_angle_max=#{coating_bevel_angle_max},coating_bevel_angle_min=#{coating_bevel_angle_min} where id=#{id}
    </update>

    <select id="getCount" resultType="int">
        select count(*) from od_coating_acceptance_criteria
        <where>
            <if test="coating_acceptance_criteria_no!=null and coating_acceptance_criteria_no!=''">
                AND coating_acceptance_criteria_no LIKE CONCAT('%',#{coating_acceptance_criteria_no},'%')
            </if>
        </where>
    </select>

    <select id="getAllByLike" resultType="map">
        Select o.* from od_coating_acceptance_criteria o
        <where>
            <if test="coating_acceptance_criteria_no!=null and coating_acceptance_criteria_no!=''">
                AND coating_acceptance_criteria_no LIKE CONCAT('%',#{coating_acceptance_criteria_no},'%')
            </if>
        </where>
        ORDER BY o.id DESC
        limit #{skip},#{take}
    </select>

    <select id="getAllODAcceptanceCriteria" resultType="com.htcsweb.entity.ODCoatingAcceptanceCriteria">
        SELECT  * from od_coating_acceptance_criteria
        ORDER BY id DESC
    </select>

    <select id="getODAcceptanceCriteriaByContractNo" resultType="com.htcsweb.entity.ODCoatingAcceptanceCriteria">
         select o.* from contract_info c inner JOIN project_info p on c.project_no=p.project_no inner JOIN od_coating_acceptance_criteria o on p.od_coating_acceptance_criteria_no=o.coating_acceptance_criteria_no WHERE c.contract_no=#{contract_no}
    </select>
</mapper>